{"version":3,"sources":["webpack:///./src/pagecomponents/SpecialPage/SpecialPage.tsx"],"names":["SpecialPageTemplate","_React$Component","props","call","this","prototype","render","_this","page","data","categories","nestCategories","edges","map","e","node","stories","cat","frontmatter","c","getCategory","tags","tagNodes","n","t","find","tag","slug","header","url","description","type","title","name","image","updated_time","updatedate","publish_time","date","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","_components_Layout_ContentLayout__WEBPACK_IMPORTED_MODULE_3__","sidebar","_components_SideBar_SideBar__WEBPACK_IMPORTED_MODULE_4__","isFixed","sidebarFixed","i","key","mapSidebarComponent","categoryBar","postheader","_components_Post_PostHeader__WEBPACK_IMPORTED_MODULE_5__","commentCnt","fields","author","context","className","_components_Content_Content__WEBPACK_IMPORTED_MODULE_6__","html","htmlAst","subscriberContent","length","_components_ContentFooter_SubscriberFooter__WEBPACK_IMPORTED_MODULE_8__","content","comments","_components_ContentFooter_CommentFooter__WEBPACK_IMPORTED_MODULE_9__","footer","mapFooterComponent","avatar","React","Component","Page","_ref","pageContext","location","pageQuery"],"mappings":"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","file":"component---src-pagecomponents-special-page-special-page-tsx-c777d324b945dd578242.js","sourcesContent":["import { graphql } from \"gatsby\";\nimport React from \"react\";\nimport { IQueryArrayResult, ICategory, IAuthor, IComment, ISpecialPage, ICustomerStory, IGatsbyLocation, ITag } from '../../interfaces';\nimport { ContentLayoutWithSidebar } from \"../../components/Layout/ContentLayout\";\nimport { SideBar } from \"../../components/SideBar/SideBar\";\nimport { PostHeader } from \"../../components/Post/PostHeader\";\nimport { ReactHTMLContent } from \"../../components/Content/Content\";\nimport { getCategory, mapSidebarComponent, mapFooterComponent, nestCategories } from '../../tool';\nimport { SubscriberFooter } from \"../../components/ContentFooter/SubscriberFooter\";\nimport { CommentFooter } from \"../../components/ContentFooter/CommentFooter\";\nimport { IHeaderProps } from \"../../components/Layout/Header\";\n\ninterface IQueryResult\n{\n  data: {\n    categories: IQueryArrayResult<ICategory>;\n    page: ISpecialPage,\n    comments: IQueryArrayResult<IComment>;\n    avatar: any;\n    stories: IQueryArrayResult<ICustomerStory>;\n    tags: IQueryArrayResult<ITag>;\n    image: any;\n  }\n  context: {\n    author: IAuthor;\n    comments: IComment[];\n  }\n  location: IGatsbyLocation;\n}\n\nexport class SpecialPageTemplate extends React.Component<IQueryResult>\n{\n  constructor(props)\n  {\n    super(props);\n  }\n  render()\n  {\n    let page = this.props.data.page;\n    let categories = nestCategories(this.props.data.categories.edges.map(e => e.node));\n    let stories = this.props.data.stories.edges.map(e => e.node);\n    let cat = page.frontmatter.categories.map(c => getCategory(c, categories));\n    let tags: ITag[] = null;\n    if(page.frontmatter.tags)\n    {\n      let tagNodes = this.props.data.tags.edges.map(n => n.node);\n      tags = page.frontmatter.tags.map(t => tagNodes.find(tag => tag.slug == t));\n    }\n\n    let header: IHeaderProps = {\n      url: page.frontmatter.slug,\n      description: page.frontmatter.description,\n      type: \"article\",\n      title: page.frontmatter.title,\n      tags: tags.map(t => t.name),\n      image: page.frontmatter.image,\n      updated_time: page.frontmatter.updatedate,\n      publish_time: page.frontmatter.date\n    }\n\n    return (\n      <ContentLayoutWithSidebar \n        sidebar={(\n          <SideBar isFixed={this.props.data.page.frontmatter.sidebarFixed}>\n            {\n              page.frontmatter.sidebar.map((c,i) => (\n                <div key={i}>\n                  {\n                    mapSidebarComponent(c, page)\n                  }\n                </div>\n              ))\n            }          \n          </SideBar>\n        )}\n        categoryBar={null}\n        header={header}\n      >\n      {\n        page.frontmatter.postheader === true ? <PostHeader frontmatter={page.frontmatter} commentCnt={page.fields.commentCnt} author={this.props.context.author} categories={cat} /> : \"\"\n      }\n        <div className=\"post-content\">\n          <ReactHTMLContent html={page.htmlAst}></ReactHTMLContent>\n          {\n            (page.fields.subscriberContent == null || page.fields.subscriberContent.length == 0) ?          \n            \"\"\n            : \n            <SubscriberFooter content={page.fields.subscriberContent}></SubscriberFooter> \n          }\n        </div>\n        {\n          page.frontmatter.comments == true ? \n          <CommentFooter slug={page.frontmatter.slug} comments={this.props.context.comments}></CommentFooter> \n          : \"\"\n        }\n\n        {\n          page.frontmatter.footer.map((c,i) => (\n            <div key={i}>\n            {\n              mapFooterComponent(c, page, cat, this.props.context.author, stories, this.props.data.avatar, this.props.data.tags.edges.map(e => e.node))\n            }\n            </div>\n          ))\n        }\n      </ContentLayoutWithSidebar>\n    )\n  }\n}\n\nconst Page = ({data, pageContext, location}) => {\n  return (\n    <SpecialPageTemplate location={location} data={data} context={pageContext}></SpecialPageTemplate>\n  )\n}\nexport default Page;\n\nexport const pageQuery = graphql`\n  query SpecialPageById($id: String!, $avatar: String, $image: String!) {\n    page: markdownRemark(\n      id: { eq: $id }\n      fileAbsolutePath: {\n        regex: \"/.*\\/data\\/pages\\/.*[.]md/\"\n      }\n    )\n    {\n      ...specialPage\n    }\n    avatar: file(\n    \tabsolutePath: { regex: \"/.*\\/data\\/img\\/*/\"}  \n      name:{ eq: $avatar}\n    ){\n      childImageSharp {\n        fixed(width: 100, height: 100) {\n          ...GatsbyImageSharpFixed\n        }\n      }\n    }\n    image: file(\n    \tabsolutePath: { eq: $image}  \n      name:{ eq: $avatar}\n    ){\n      childImageSharp {\n        fluid(maxWidth: 500, maxHeight: 500) {\n          ...GatsbyImageSharpFluid\n        }\n      }\n    }\n    ...categories\n    ...customerStories\n    ...tags\n}\n`;\n"],"sourceRoot":""}